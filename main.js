!function(){"use strict";class e{constructor(e,t,s){this._cardTitle=e.name,this._cardLink=e.link,this._cardSelector=t,this._handleCardClick=s,this._cardElement=this._getTemplate(),this._cardImage=this._cardElement.querySelector(".gallery__card-image"),this._cardLikeButton=this._cardElement.querySelector(".gallery__card-button"),this._cardDeleteButton=this._cardElement.querySelector(".gallery__delete-card")}_deleteGalleryCard(e){e.target.closest(".gallery__card").remove()}_handleImageClick(){this._cardImage.addEventListener("click",(()=>{this._handleCardClick(this._cardLink,this._cardTitle)}))}_handleCardDeleteButton(){this._cardDeleteButton.addEventListener("click",this._deleteGalleryCard)}_handleCardLikeButton(){this._cardLikeButton.addEventListener("click",(e=>{e.target.classList.toggle("gallery__card-button_active")}))}_setEventListeners(){this._handleImageClick(),this._handleCardDeleteButton(),this._handleCardLikeButton()}_getTemplate(){return document.querySelector(this._cardSelector).content.cloneNode(!0)}generateCard(){return this._cardImage.setAttribute("src",this._cardLink),this._cardImage.setAttribute("alt",this._cardTitle),this._cardElement.querySelector(".gallery__card-title").textContent=this._cardTitle,this._setEventListeners(),this._cardElement}}class t{constructor(e){var t,s;s=e=>{"Escape"===e.key&&this.close()},(t="_handleEscClose")in this?Object.defineProperty(this,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):this[t]=s,this._popupElement=document.querySelector(e),this._handleEscClose=this._handleEscClose.bind(this)}open(){this._popupElement.classList.add("popup_active"),document.addEventListener("keyup",this._handleEscClose)}close(){this._popupElement.classList.remove("popup_active"),document.removeEventListener("keyup",this._handleEscClose)}setEventListeners(){this._popupElement.addEventListener("mousedown",(e=>{(e.target.classList.contains("popup")||e.target.classList.contains("popup__close-button"))&&this.close()}))}}class s extends t{constructor(e,t){super(e),this._submitHandler=t,this._form=this._popupElement.querySelector(".form"),this._submitButton=this._form.querySelector("button"),this._inputs=[...this._form.querySelectorAll(".form__input")]}_getInputValues(){const e={};return this._inputs.forEach((t=>{const s=t.name,r=t.value;e[s]=r})),e}setEventListeners(){super.setEventListeners(),this._form.addEventListener("submit",(e=>{e.preventDefault();const t=this._getInputValues();this._submitHandler(t)}))}close(){super.close(),this._form.reset()}}function r(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class n{constructor(e,t){r(this,"_showInputError",((e,t)=>{const s=this._element.querySelector(".".concat(e.id,"-error"));e.classList.add(this._inputErrorClass),s.textContent=t,s.classList.add(this._errorClass)})),r(this,"_hideInputError",(e=>{const t=this._element.querySelector(".".concat(e.id,"-error"));e.classList.remove(this._inputErrorClass),t.textContent="",t.classList.remove(this._errorClass)})),r(this,"_isValid",(e=>{e.validity.valid?this._hideInputError(e):this._showInputError(e,e.validationMessage)})),r(this,"_hasInvalidInput",(e=>e.some((e=>!e.validity.valid)))),r(this,"resetValidation",(()=>{this._toggleButtonState(),this._inputList.forEach((e=>{this._hideInputError(e)}))})),r(this,"_toggleButtonState",(()=>{this._hasInvalidInput(this._inputList)?(this._buttonElement.classList.add(this._inactiveButtonClass),this._buttonElement.setAttribute("disabled","")):(this._buttonElement.classList.remove(this._inactiveButtonClass),this._buttonElement.removeAttribute("disabled"))})),r(this,"_setEventListeners",(()=>{this._toggleButtonState(),this._inputList.forEach((e=>{e.addEventListener("input",(()=>{this._isValid(e),this._toggleButtonState()}))}))})),r(this,"enableValidation",(()=>{this._element.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()})),this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._element=t,this._inputList=Array.from(this._element.querySelectorAll(this._inputSelector)),this._buttonElement=this._element.querySelector(this._submitButtonSelector)}}const i={formSelector:".form",inputSelector:".form__input",submitButtonSelector:".form__button",inactiveButtonClass:"form__button_disabled",inputErrorClass:"form__input_type_error",errorClass:"form__input-error_visible"},o=profilePopup.querySelector(".form"),l=newPlacePopup.querySelector(".form"),a=document.getElementById("newPlaceButton"),c=document.querySelector(".profile__open-button"),u=document.querySelector(".gallery__container"),d=document.getElementById("name"),_=document.getElementById("job"),h=new class{constructor(e,t){this._profile=document.querySelector(t),this._profileName=this._profile.querySelector(e.userNameSelector),this._profileJob=this._profile.querySelector(e.userJobSelector)}getUserInfo(){return{name:this._profileName.textContent,job:this._profileJob.textContent}}setUserInfo(e,t){this._profileName.textContent=e,this._profileJob.textContent=t}}({userNameSelector:".profile__name",userJobSelector:".profile__description"},".profile__info"),p=new s("#newPlacePopup",(e=>{b({name:e.cardTitle,link:e.cardLink},u),p.close()}),i),m=new s("#profilePopup",(e=>{h.setUserInfo(e.name,e.job),m.close()}),i),E=new class extends t{open(e,t){super.open();const s=this._popupElement.querySelector("img"),r=this._popupElement.querySelector("p");s.src=e,s.alt=t,r.textContent=t}}("#bigPicturePopup");E.setEventListeners(),p.setEventListeners(),m.setEventListeners(),a.addEventListener("click",(()=>{y.resetValidation(),p.open()})),c.addEventListener("click",(()=>{var e;e=h.getUserInfo(),d.value=e.name,_.value=e.job,m.open()}));const b=t=>{const s=(t=>new e(t,"#galleryCard",((e,t)=>{E.open(e,t)})))(t);g.addItem(s.generateCard())},g=new class{constructor(e,t){let{items:s,renderer:r}=e;this._items=s,this._renderer=r,this._container=document.querySelector(t)}renderItems(){this._items.forEach((e=>{this._renderer(e)}))}addItem(e){this._container.prepend(e)}}({items:[{name:"Yosemite Valley",link:"https://code.s3.yandex.net/web-code/yosemite.jpg"},{name:"Lake Louise",link:"https://code.s3.yandex.net/web-code/lake-louise.jpg"},{name:"Bald Mountains",link:"https://code.s3.yandex.net/web-code/bald-mountains.jpg"},{name:"Latemar",link:"https://code.s3.yandex.net/web-code/latemar.jpg"},{name:"Vanoise National Park",link:"https://code.s3.yandex.net/web-code/vanoise.jpg"},{name:"Lago di Braies",link:"https://code.s3.yandex.net/web-code/lago.jpg"}],renderer:b},".gallery__container");g.renderItems();const v=new n(i,o),y=new n(i,l);v.enableValidation(),y.enableValidation()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RUFBVSxJRy9GaEIsTUFDSXZJLFlBQVksRUFBcUJ5SSxHQUFtQixJQUF4QyxNQUFFQyxFQUFGLFNBQVNDLEdBQStCLEVBQ2hEdkksS0FBS3dJLE9BQVNGLEVBQ2R0SSxLQUFLeUksVUFBWUYsRUFDakJ2SSxLQUFLMEksV0FBYWhILFNBQVNoQixjQUFjMkgsR0FHN0NNLGNBQ0kzSSxLQUFLd0ksT0FBT2pGLFNBQVMxRCxJQUNqQkcsS0FBS3lJLFVBQVU1SSxNQUl2QnVJLFFBQVFRLEdBQ0o1SSxLQUFLMEksV0FBV0csUUFBUUQsS0hpRkosQ0FDcEJOLE1EaEdvQixDQUFDLENBQ3JCcEksS0FBTSxrQkFDTkUsS0FBTSxvREFFVixDQUNJRixLQUFNLGNBQ05FLEtBQU0sdURBRVYsQ0FDSUYsS0FBTSxpQkFDTkUsS0FBTSwwREFFVixDQUNJRixLQUFNLFVBQ05FLEtBQU0sbURBRVYsQ0FDSUYsS0FBTSx3QkFDTkUsS0FBTSxtREFFVixDQUNJRixLQUFNLGlCQUNORSxLQUFNLGlEQzJFTm1JLFNBQVVoQixHQUVkLHVCQUdKWSxFQUFRUSxjQUVSLE1BQU1HLEVBQXVCLElBQUlqRixFQUM3QmlDLEVBQ0FFLEdBRUU2QixFQUF3QixJQUFJaEUsRUFBY2lDLEVBQWdCSSxHQUVoRTRDLEVBQXFCQyxtQkFDckJsQixFQUFzQmtCLG1CIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8veWFuZGV4LnByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8veWFuZGV4LnByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3lhbmRleC5wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3lhbmRleC5wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL3lhbmRleC5wcmFjdGljdW0vLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL3lhbmRleC5wcmFjdGljdW0vLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8veWFuZGV4LnByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL3lhbmRleC5wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly95YW5kZXgucHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjbGFzcyBDYXJkIHtcbiAgICBjb25zdHJ1Y3RvcihkYXRhLCBjYXJkU2VsZWN0b3IsIGhhbmRsZUNhcmRDbGljaykge1xuICAgICAgICB0aGlzLl9jYXJkVGl0bGUgPSBkYXRhLm5hbWU7XG4gICAgICAgIHRoaXMuX2NhcmRMaW5rID0gZGF0YS5saW5rO1xuICAgICAgICB0aGlzLl9jYXJkU2VsZWN0b3IgPSBjYXJkU2VsZWN0b3I7XG4gICAgICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayA9IGhhbmRsZUNhcmRDbGljaztcbiAgICAgICAgdGhpcy5fY2FyZEVsZW1lbnQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xuICAgICAgICB0aGlzLl9jYXJkSW1hZ2UgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmdhbGxlcnlfX2NhcmQtaW1hZ2VcIik7XG4gICAgICAgIHRoaXMuX2NhcmRMaWtlQnV0dG9uID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgICAgICAgIFwiLmdhbGxlcnlfX2NhcmQtYnV0dG9uXCJcbiAgICAgICAgKTtcbiAgICAgICAgdGhpcy5fY2FyZERlbGV0ZUJ1dHRvbiA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICAgICAgICBcIi5nYWxsZXJ5X19kZWxldGUtY2FyZFwiXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgX2RlbGV0ZUdhbGxlcnlDYXJkKGUpIHtcbiAgICAgICAgZS50YXJnZXQuY2xvc2VzdChcIi5nYWxsZXJ5X19jYXJkXCIpLnJlbW92ZSgpO1xuICAgIH1cblxuICAgIF9oYW5kbGVJbWFnZUNsaWNrKCkge1xuICAgICAgICB0aGlzLl9jYXJkSW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayh0aGlzLl9jYXJkTGluaywgdGhpcy5fY2FyZFRpdGxlKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgX2hhbmRsZUNhcmREZWxldGVCdXR0b24oKSB7XG4gICAgICAgIHRoaXMuX2NhcmREZWxldGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuX2RlbGV0ZUdhbGxlcnlDYXJkKTtcbiAgICB9XG5cbiAgICBfaGFuZGxlQ2FyZExpa2VCdXR0b24oKSB7XG4gICAgICAgIHRoaXMuX2NhcmRMaWtlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIGV2ZW50LnRhcmdldC5jbGFzc0xpc3QudG9nZ2xlKFwiZ2FsbGVyeV9fY2FyZC1idXR0b25fYWN0aXZlXCIpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2soKTtcbiAgICAgICAgdGhpcy5faGFuZGxlQ2FyZERlbGV0ZUJ1dHRvbigpO1xuICAgICAgICB0aGlzLl9oYW5kbGVDYXJkTGlrZUJ1dHRvbigpO1xuICAgIH1cblxuICAgIF9nZXRUZW1wbGF0ZSgpIHtcbiAgICAgICAgY29uc3QgY2FyZEVsZW1lbnQgPSBkb2N1bWVudFxuICAgICAgICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fY2FyZFNlbGVjdG9yKVxuICAgICAgICAgICAgLmNvbnRlbnQuY2xvbmVOb2RlKHRydWUpO1xuXG4gICAgICAgIHJldHVybiBjYXJkRWxlbWVudDtcbiAgICB9XG5cbiAgICBnZW5lcmF0ZUNhcmQoKSB7XG4gICAgICAgIHRoaXMuX2NhcmRJbWFnZS5zZXRBdHRyaWJ1dGUoXCJzcmNcIiwgdGhpcy5fY2FyZExpbmspO1xuICAgICAgICB0aGlzLl9jYXJkSW1hZ2Uuc2V0QXR0cmlidXRlKFwiYWx0XCIsIHRoaXMuX2NhcmRUaXRsZSk7XG4gICAgICAgIHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZ2FsbGVyeV9fY2FyZC10aXRsZVwiKS50ZXh0Q29udGVudCA9XG4gICAgICAgICAgICB0aGlzLl9jYXJkVGl0bGU7XG5cbiAgICAgICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuICAgICAgICByZXR1cm4gdGhpcy5fY2FyZEVsZW1lbnQ7XG4gICAgfVxufVxuXG5leHBvcnQgeyBDYXJkIH07IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xuICAgIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICAgICAgdGhpcy5fcG9wdXBFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcbiAgICAgICAgdGhpcy5faGFuZGxlRXNjQ2xvc2UgPSB0aGlzLl9oYW5kbGVFc2NDbG9zZS5iaW5kKHRoaXMpO1xuICAgIH1cblxuICAgIF9oYW5kbGVFc2NDbG9zZSA9IChlKSA9PiB7XG4gICAgICAgIGlmIChlLmtleSA9PT0gXCJFc2NhcGVcIikge1xuICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIG9wZW4oKSB7XG4gICAgICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwicG9wdXBfYWN0aXZlXCIpO1xuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5dXBcIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICAgIH1cblxuICAgIGNsb3NlKCkge1xuICAgICAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcInBvcHVwX2FjdGl2ZVwiKTtcbiAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleXVwXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgICB9XG5cbiAgICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICAgICAgdGhpcy5fcG9wdXBFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgKGV2dCkgPT4ge1xuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgIGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwicG9wdXBcIikgfHxcbiAgICAgICAgICAgICAgICBldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcInBvcHVwX19jbG9zZS1idXR0b25cIilcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxufSIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xuICAgIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIHN1Ym1pdEhhbmRsZXIpIHtcblxuICAgICAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcbiAgICAgICAgdGhpcy5fc3VibWl0SGFuZGxlciA9IHN1Ym1pdEhhbmRsZXI7XG4gICAgICAgIHRoaXMuX2Zvcm0gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb3JtXCIpO1xuICAgICAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoXCJidXR0b25cIik7XG4gICAgICAgIHRoaXMuX2lucHV0cyA9IFsuLi50aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoXCIuZm9ybV9faW5wdXRcIildO1xuICAgIH1cblxuICAgIF9nZXRJbnB1dFZhbHVlcygpIHtcbiAgICAgICAgY29uc3QgdmFsdWVzID0ge307XG5cbiAgICAgICAgdGhpcy5faW5wdXRzLmZvckVhY2goKGlucHV0KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBrZXkgPSBpbnB1dC5uYW1lO1xuICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBpbnB1dC52YWx1ZTtcblxuICAgICAgICAgICAgdmFsdWVzW2tleV0gPSB2YWx1ZTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB2YWx1ZXM7XG4gICAgfVxuXG4gICAgLy8gc2V0SW5wdXRWYWx1ZXMoZGF0YSkge1xuICAgIC8vICAgICB0aGlzLl9pbnB1dHMuZm9yRWFjaChpbnB1dCA9PiB7XG4gICAgLy8gICAgICAgICBpbnB1dC52YWx1ZSA9IGRhdGFbaW5wdXQubmFtZV07XG4gICAgLy8gICAgIH0pXG4gICAgLy8gfVxuXG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZSkgPT4ge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgY29uc3QgdmFsdWVzRnJvbUZvcm0gPSB0aGlzLl9nZXRJbnB1dFZhbHVlcygpO1xuXG4gICAgICAgICAgICB0aGlzLl9zdWJtaXRIYW5kbGVyKHZhbHVlc0Zyb21Gb3JtKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGNsb3NlKCkge1xuICAgICAgICBzdXBlci5jbG9zZSgpO1xuICAgICAgICB0aGlzLl9mb3JtLnJlc2V0KCk7XG4gICAgfVxufSIsImNsYXNzIEZvcm1WYWxpZGF0b3Ige1xuICAgIGNvbnN0cnVjdG9yKHNldHRpbmdzLCBmb3JtRWxlbWVudCkge1xuICAgICAgICB0aGlzLl9pbnB1dFNlbGVjdG9yID0gc2V0dGluZ3MuaW5wdXRTZWxlY3RvcjtcbiAgICAgICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IgPSBzZXR0aW5ncy5zdWJtaXRCdXR0b25TZWxlY3RvcjtcbiAgICAgICAgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyA9IHNldHRpbmdzLmluYWN0aXZlQnV0dG9uQ2xhc3M7XG4gICAgICAgIHRoaXMuX2lucHV0RXJyb3JDbGFzcyA9IHNldHRpbmdzLmlucHV0RXJyb3JDbGFzcztcbiAgICAgICAgdGhpcy5fZXJyb3JDbGFzcyA9IHNldHRpbmdzLmVycm9yQ2xhc3M7XG5cbiAgICAgICAgdGhpcy5fZWxlbWVudCA9IGZvcm1FbGVtZW50O1xuXG4gICAgICAgIHRoaXMuX2lucHV0TGlzdCA9IEFycmF5LmZyb20oXG4gICAgICAgICAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3RvcilcbiAgICAgICAgKTtcblxuICAgICAgICB0aGlzLl9idXR0b25FbGVtZW50ID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgICAgICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3JcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBfc2hvd0lucHV0RXJyb3IgPSAoaW5wdXRFbGVtZW50LCBlcnJvck1lc3NhZ2UpID0+IHtcbiAgICAgICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgICAgICAgYC4ke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgXG4gICAgICAgICk7XG5cbiAgICAgICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcbiAgICAgICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gZXJyb3JNZXNzYWdlO1xuICAgICAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9lcnJvckNsYXNzKTtcbiAgICB9O1xuXG4gICAgX2hpZGVJbnB1dEVycm9yID0gKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICAgICAgICBgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmBcbiAgICAgICAgKTtcblxuICAgICAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xuICAgICAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBcIlwiO1xuICAgICAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzKTtcbiAgICB9O1xuXG4gICAgX2lzVmFsaWQgPSAoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICAgIGlmICghaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7XG4gICAgICAgICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQsIGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIF9oYXNJbnZhbGlkSW5wdXQgPSAoaW5wdXRMaXN0KSA9PiB7XG4gICAgICAgIHJldHVybiBpbnB1dExpc3Quc29tZSgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZDtcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIHJlc2V0VmFsaWRhdGlvbiA9ICgpID0+IHtcbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcblxuICAgICAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICAgICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xuICAgICAgICB9KTtcblxuICAgIH07XG5cbiAgICBfdG9nZ2xlQnV0dG9uU3RhdGUgPSAoKSA9PiB7XG4gICAgICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQodGhpcy5faW5wdXRMaXN0KSkge1xuICAgICAgICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgICAgICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiLCBcIlwiKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICAgICAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKFwiZGlzYWJsZWRcIik7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgX3NldEV2ZW50TGlzdGVuZXJzID0gKCkgPT4ge1xuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xuXG4gICAgICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuX2lzVmFsaWQoaW5wdXRFbGVtZW50KTtcbiAgICAgICAgICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICBlbmFibGVWYWxpZGF0aW9uID0gKCkgPT4ge1xuICAgICAgICB0aGlzLl9lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGUpID0+IHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgfTtcbn1cblxuZXhwb3J0IHsgRm9ybVZhbGlkYXRvciB9OyIsImV4cG9ydCBjb25zdCBpbml0aWFsQ2FyZHMgPSBbe1xuICAgICAgICBuYW1lOiBcIllvc2VtaXRlIFZhbGxleVwiLFxuICAgICAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL3lvc2VtaXRlLmpwZ1wiLFxuICAgIH0sXG4gICAge1xuICAgICAgICBuYW1lOiBcIkxha2UgTG91aXNlXCIsXG4gICAgICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvbGFrZS1sb3Vpc2UuanBnXCIsXG4gICAgfSxcbiAgICB7XG4gICAgICAgIG5hbWU6IFwiQmFsZCBNb3VudGFpbnNcIixcbiAgICAgICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS9iYWxkLW1vdW50YWlucy5qcGdcIixcbiAgICB9LFxuICAgIHtcbiAgICAgICAgbmFtZTogXCJMYXRlbWFyXCIsXG4gICAgICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvbGF0ZW1hci5qcGdcIixcbiAgICB9LFxuICAgIHtcbiAgICAgICAgbmFtZTogXCJWYW5vaXNlIE5hdGlvbmFsIFBhcmtcIixcbiAgICAgICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS92YW5vaXNlLmpwZ1wiLFxuICAgIH0sXG4gICAge1xuICAgICAgICBuYW1lOiBcIkxhZ28gZGkgQnJhaWVzXCIsXG4gICAgICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvbGFnby5qcGdcIixcbiAgICB9LFxuXTtcblxuZXhwb3J0IGNvbnN0IGNvbmZpZ3VyYXRpb25zID0ge1xuICAgIGZvcm1TZWxlY3RvcjogXCIuZm9ybVwiLFxuICAgIGlucHV0U2VsZWN0b3I6IFwiLmZvcm1fX2lucHV0XCIsXG4gICAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLmZvcm1fX2J1dHRvblwiLFxuICAgIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwiZm9ybV9fYnV0dG9uX2Rpc2FibGVkXCIsXG4gICAgaW5wdXRFcnJvckNsYXNzOiBcImZvcm1fX2lucHV0X3R5cGVfZXJyb3JcIixcbiAgICBlcnJvckNsYXNzOiBcImZvcm1fX2lucHV0LWVycm9yX3Zpc2libGVcIixcbn07XG5cbmV4cG9ydCBjb25zdCBwcm9maWxlUG9wdXBGb3JtID0gcHJvZmlsZVBvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybVwiKTtcbmV4cG9ydCBjb25zdCBuZXdQbGFjZUZvcm0gPSBuZXdQbGFjZVBvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybVwiKTtcbmV4cG9ydCBjb25zdCBuZXdQbGFjZUJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibmV3UGxhY2VCdXR0b25cIik7XG5cbmV4cG9ydCBjb25zdCBwcm9maWxlUG9wdXBPcGVuQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICBcIi5wcm9maWxlX19vcGVuLWJ1dHRvblwiXG4pO1xuZXhwb3J0IGNvbnN0IGdhbGxlcnlDYXJkVGVtcGxhdGVTZWxlY3RvciA9IFwiI2dhbGxlcnlDYXJkXCI7XG5leHBvcnQgY29uc3QgY2FyZHNXcmFwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5nYWxsZXJ5X19jb250YWluZXJcIik7XG5cbmV4cG9ydCBjb25zdCBuYW1lSW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm5hbWVcIik7XG5leHBvcnQgY29uc3Qgam9iSW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImpvYlwiKTsiLCJpbXBvcnQgXCIuL2luZGV4LmNzc1wiO1xuaW1wb3J0IHsgQ2FyZCB9IGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjtcblxuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiO1xuXG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcbmltcG9ydCB7IEZvcm1WYWxpZGF0b3IgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yXCI7XG5pbXBvcnQgeyBQb3B1cFdpdGhJbWFnZSB9IGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlXCI7XG5pbXBvcnQge1xuICAgIGluaXRpYWxDYXJkcyxcbiAgICBjb25maWd1cmF0aW9ucyxcbiAgICBuZXdQbGFjZUJ1dHRvbixcbiAgICBwcm9maWxlUG9wdXBPcGVuQnV0dG9uLFxuICAgIGdhbGxlcnlDYXJkVGVtcGxhdGVTZWxlY3RvcixcbiAgICBjYXJkc1dyYXAsXG4gICAgbmFtZUlucHV0LFxuICAgIGpvYklucHV0LFxuICAgIHByb2ZpbGVQb3B1cEZvcm0sXG4gICAgbmV3UGxhY2VGb3JtLFxufSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLmpzXCI7XG5cbmNvbnN0IGNyZWF0ZUNhcmQgPSAoY2FyZERhdGEpID0+IHtcbiAgICBjb25zdCBfY2FyZCA9IG5ldyBDYXJkKFxuICAgICAgICBjYXJkRGF0YSxcbiAgICAgICAgZ2FsbGVyeUNhcmRUZW1wbGF0ZVNlbGVjdG9yLFxuICAgICAgICAobGluaywgbmFtZSkgPT4ge1xuICAgICAgICAgICAgYmlnUGljdHVyZVBvcHVwLm9wZW4obGluaywgbmFtZSk7XG4gICAgICAgIH1cbiAgICApO1xuICAgIHJldHVybiBfY2FyZDtcbn07XG5cbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKHtcbiAgICAgICAgdXNlck5hbWVTZWxlY3RvcjogXCIucHJvZmlsZV9fbmFtZVwiLFxuICAgICAgICB1c2VySm9iU2VsZWN0b3I6IFwiLnByb2ZpbGVfX2Rlc2NyaXB0aW9uXCIsXG4gICAgfSxcbiAgICBcIi5wcm9maWxlX19pbmZvXCJcbik7XG5cbmNvbnN0IGhhbmRsZU5ld1BsYWNlRm9ybVN1Ym1pdCA9IChkYXRhKSA9PiB7XG4gICAgcmVuZGVyQ2FyZCh7XG4gICAgICAgICAgICBuYW1lOiBkYXRhW1wiY2FyZFRpdGxlXCJdLFxuICAgICAgICAgICAgbGluazogZGF0YVtcImNhcmRMaW5rXCJdLFxuICAgICAgICB9LFxuICAgICAgICBjYXJkc1dyYXBcbiAgICApO1xuICAgIG5ld1BsYWNlUG9wdXAuY2xvc2UoKTtcbn07XG5cbmNvbnN0IGhhbmRsZVByb2ZpbGVGb3JtU3VibWl0ID0gKGRhdGEpID0+IHtcbiAgICB1c2VySW5mby5zZXRVc2VySW5mbyhkYXRhLm5hbWUsIGRhdGEuam9iKTtcbiAgICBwcm9maWxlUG9wdXAuY2xvc2UoKTtcbn07XG5cbmNvbnN0IG5ld1BsYWNlUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcbiAgICBcIiNuZXdQbGFjZVBvcHVwXCIsXG4gICAgaGFuZGxlTmV3UGxhY2VGb3JtU3VibWl0LFxuICAgIGNvbmZpZ3VyYXRpb25zXG4pO1xuY29uc3QgcHJvZmlsZVBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXG4gICAgXCIjcHJvZmlsZVBvcHVwXCIsXG4gICAgaGFuZGxlUHJvZmlsZUZvcm1TdWJtaXQsXG4gICAgY29uZmlndXJhdGlvbnNcbik7XG5jb25zdCBiaWdQaWN0dXJlUG9wdXAgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoXCIjYmlnUGljdHVyZVBvcHVwXCIpO1xuXG5iaWdQaWN0dXJlUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbm5ld1BsYWNlUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbnByb2ZpbGVQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xuXG5mdW5jdGlvbiBmaWxsUHJvZmlsZUlucHV0cyhpbmZvKSB7XG4gICAgbmFtZUlucHV0LnZhbHVlID0gaW5mby5uYW1lO1xuICAgIGpvYklucHV0LnZhbHVlID0gaW5mby5qb2I7XG59XG5cbm5ld1BsYWNlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgbmV3UGxhY2VGb3JtVmFsaWRhdG9yLnJlc2V0VmFsaWRhdGlvbigpO1xuICAgIG5ld1BsYWNlUG9wdXAub3BlbigpO1xufSk7XG5cbnByb2ZpbGVQb3B1cE9wZW5CdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICBjb25zdCBmb3JtSW5wdXRzID0gdXNlckluZm8uZ2V0VXNlckluZm8oKTtcblxuICAgIGZpbGxQcm9maWxlSW5wdXRzKGZvcm1JbnB1dHMpO1xuXG4gICAgcHJvZmlsZVBvcHVwLm9wZW4oKTtcbn0pO1xuXG5jb25zdCByZW5kZXJDYXJkID0gKGNhcmREYXRhKSA9PiB7XG4gICAgY29uc3QgY2FyZCA9IGNyZWF0ZUNhcmQoY2FyZERhdGEpO1xuXG4gICAgc2VjdGlvbi5hZGRJdGVtKGNhcmQuZ2VuZXJhdGVDYXJkKCkpO1xufTtcblxuY29uc3Qgc2VjdGlvbiA9IG5ldyBTZWN0aW9uKHtcbiAgICAgICAgaXRlbXM6IGluaXRpYWxDYXJkcyxcbiAgICAgICAgcmVuZGVyZXI6IHJlbmRlckNhcmQsXG4gICAgfSxcbiAgICBcIi5nYWxsZXJ5X19jb250YWluZXJcIlxuKTtcblxuc2VjdGlvbi5yZW5kZXJJdGVtcygpO1xuXG5jb25zdCBwcm9maWxlRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKFxuICAgIGNvbmZpZ3VyYXRpb25zLFxuICAgIHByb2ZpbGVQb3B1cEZvcm1cbik7XG5jb25zdCBuZXdQbGFjZUZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihjb25maWd1cmF0aW9ucywgbmV3UGxhY2VGb3JtKTtcblxucHJvZmlsZUZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xubmV3UGxhY2VGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTsiLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XG4gICAgY29uc3RydWN0b3IodXNlckRhdGEsIHByb2ZpbGVTZWxlY3Rvcikge1xuICAgICAgICB0aGlzLl9wcm9maWxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwcm9maWxlU2VsZWN0b3IpO1xuXG4gICAgICAgIHRoaXMuX3Byb2ZpbGVOYW1lID0gdGhpcy5fcHJvZmlsZS5xdWVyeVNlbGVjdG9yKHVzZXJEYXRhLnVzZXJOYW1lU2VsZWN0b3IpO1xuICAgICAgICB0aGlzLl9wcm9maWxlSm9iID0gdGhpcy5fcHJvZmlsZS5xdWVyeVNlbGVjdG9yKHVzZXJEYXRhLnVzZXJKb2JTZWxlY3Rvcik7XG4gICAgfVxuXG4gICAgZ2V0VXNlckluZm8oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBuYW1lOiB0aGlzLl9wcm9maWxlTmFtZS50ZXh0Q29udGVudCxcbiAgICAgICAgICAgIGpvYjogdGhpcy5fcHJvZmlsZUpvYi50ZXh0Q29udGVudCxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBzZXRVc2VySW5mbyh1c2VyTmFtZSwgdXNlckpvYikge1xuICAgICAgICB0aGlzLl9wcm9maWxlTmFtZS50ZXh0Q29udGVudCA9IHVzZXJOYW1lO1xuICAgICAgICB0aGlzLl9wcm9maWxlSm9iLnRleHRDb250ZW50ID0gdXNlckpvYjtcbiAgICB9XG59IiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XG5cbmV4cG9ydCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcbiAgICBvcGVuKGxpbmssIG5hbWUpIHtcbiAgICAgICAgc3VwZXIub3BlbigpO1xuXG4gICAgICAgIGNvbnN0IGltYWdlRWxlbWVudCA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiaW1nXCIpO1xuICAgICAgICBjb25zdCBjYXB0aW9uRWxlbWVudCA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwicFwiKTtcblxuICAgICAgICBpbWFnZUVsZW1lbnQuc3JjID0gbGluaztcbiAgICAgICAgaW1hZ2VFbGVtZW50LmFsdCA9IG5hbWU7XG4gICAgICAgIGNhcHRpb25FbGVtZW50LnRleHRDb250ZW50ID0gbmFtZTtcbiAgICB9XG59IiwiY2xhc3MgU2VjdGlvbiB7XG4gICAgY29uc3RydWN0b3IoeyBpdGVtcywgcmVuZGVyZXIgfSwgY29udGFpbmVyU2VsZWN0b3IpIHtcbiAgICAgICAgdGhpcy5faXRlbXMgPSBpdGVtcztcbiAgICAgICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcbiAgICAgICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3Rvcik7XG4gICAgfVxuXG4gICAgcmVuZGVySXRlbXMoKSB7XG4gICAgICAgIHRoaXMuX2l0ZW1zLmZvckVhY2goKGRhdGEpID0+IHtcbiAgICAgICAgICAgIHRoaXMuX3JlbmRlcmVyKGRhdGEpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBhZGRJdGVtKGVsZW1lbnQpIHtcbiAgICAgICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoZWxlbWVudCk7XG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBTZWN0aW9uOyJdLCJuYW1lcyI6WyJDYXJkIiwiY29uc3RydWN0b3IiLCJkYXRhIiwiY2FyZFNlbGVjdG9yIiwiaGFuZGxlQ2FyZENsaWNrIiwidGhpcyIsIl9jYXJkVGl0bGUiLCJuYW1lIiwiX2NhcmRMaW5rIiwibGluayIsIl9jYXJkU2VsZWN0b3IiLCJfaGFuZGxlQ2FyZENsaWNrIiwiX2NhcmRFbGVtZW50IiwiX2dldFRlbXBsYXRlIiwiX2NhcmRJbWFnZSIsInF1ZXJ5U2VsZWN0b3IiLCJfY2FyZExpa2VCdXR0b24iLCJfY2FyZERlbGV0ZUJ1dHRvbiIsIl9kZWxldGVHYWxsZXJ5Q2FyZCIsImUiLCJ0YXJnZXQiLCJjbG9zZXN0IiwicmVtb3ZlIiwiX2hhbmRsZUltYWdlQ2xpY2siLCJhZGRFdmVudExpc3RlbmVyIiwiX2hhbmRsZUNhcmREZWxldGVCdXR0b24iLCJfaGFuZGxlQ2FyZExpa2VCdXR0b24iLCJldmVudCIsImNsYXNzTGlzdCIsInRvZ2dsZSIsIl9zZXRFdmVudExpc3RlbmVycyIsImRvY3VtZW50IiwiY29udGVudCIsImNsb25lTm9kZSIsImdlbmVyYXRlQ2FyZCIsInNldEF0dHJpYnV0ZSIsInRleHRDb250ZW50IiwiUG9wdXAiLCJwb3B1cFNlbGVjdG9yIiwia2V5IiwiY2xvc2UiLCJfcG9wdXBFbGVtZW50IiwiX2hhbmRsZUVzY0Nsb3NlIiwiYmluZCIsIm9wZW4iLCJhZGQiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJldnQiLCJjb250YWlucyIsIlBvcHVwV2l0aEZvcm0iLCJzdWJtaXRIYW5kbGVyIiwic3VwZXIiLCJfc3VibWl0SGFuZGxlciIsIl9mb3JtIiwiX3N1Ym1pdEJ1dHRvbiIsIl9pbnB1dHMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiX2dldElucHV0VmFsdWVzIiwidmFsdWVzIiwiZm9yRWFjaCIsImlucHV0IiwidmFsdWUiLCJwcmV2ZW50RGVmYXVsdCIsInZhbHVlc0Zyb21Gb3JtIiwicmVzZXQiLCJGb3JtVmFsaWRhdG9yIiwic2V0dGluZ3MiLCJmb3JtRWxlbWVudCIsImlucHV0RWxlbWVudCIsImVycm9yTWVzc2FnZSIsImVycm9yRWxlbWVudCIsIl9lbGVtZW50IiwiaWQiLCJfaW5wdXRFcnJvckNsYXNzIiwiX2Vycm9yQ2xhc3MiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX2hpZGVJbnB1dEVycm9yIiwiX3Nob3dJbnB1dEVycm9yIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJpbnB1dExpc3QiLCJzb21lIiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwiX2lucHV0TGlzdCIsIl9oYXNJbnZhbGlkSW5wdXQiLCJfYnV0dG9uRWxlbWVudCIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwicmVtb3ZlQXR0cmlidXRlIiwiX2lzVmFsaWQiLCJfaW5wdXRTZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiQXJyYXkiLCJmcm9tIiwiY29uZmlndXJhdGlvbnMiLCJmb3JtU2VsZWN0b3IiLCJwcm9maWxlUG9wdXBGb3JtIiwicHJvZmlsZVBvcHVwIiwibmV3UGxhY2VGb3JtIiwibmV3UGxhY2VQb3B1cCIsIm5ld1BsYWNlQnV0dG9uIiwiZ2V0RWxlbWVudEJ5SWQiLCJwcm9maWxlUG9wdXBPcGVuQnV0dG9uIiwiY2FyZHNXcmFwIiwibmFtZUlucHV0Iiwiam9iSW5wdXQiLCJ1c2VySW5mbyIsInVzZXJEYXRhIiwicHJvZmlsZVNlbGVjdG9yIiwiX3Byb2ZpbGUiLCJfcHJvZmlsZU5hbWUiLCJ1c2VyTmFtZVNlbGVjdG9yIiwiX3Byb2ZpbGVKb2IiLCJ1c2VySm9iU2VsZWN0b3IiLCJnZXRVc2VySW5mbyIsImpvYiIsInNldFVzZXJJbmZvIiwidXNlck5hbWUiLCJ1c2VySm9iIiwicmVuZGVyQ2FyZCIsImJpZ1BpY3R1cmVQb3B1cCIsImltYWdlRWxlbWVudCIsImNhcHRpb25FbGVtZW50Iiwic3JjIiwiYWx0IiwibmV3UGxhY2VGb3JtVmFsaWRhdG9yIiwicmVzZXRWYWxpZGF0aW9uIiwiaW5mbyIsImNhcmREYXRhIiwiY2FyZCIsImNyZWF0ZUNhcmQiLCJzZWN0aW9uIiwiYWRkSXRlbSIsImNvbnRhaW5lclNlbGVjdG9yIiwiaXRlbXMiLCJyZW5kZXJlciIsIl9pdGVtcyIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJyZW5kZXJJdGVtcyIsImVsZW1lbnQiLCJwcmVwZW5kIiwicHJvZmlsZUZvcm1WYWxpZGF0b3IiLCJlbmFibGVWYWxpZGF0aW9uIl0sInNvdXJjZVJvb3QiOiIifQ==